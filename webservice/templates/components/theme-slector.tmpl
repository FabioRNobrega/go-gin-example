{{ define "theme-selector/base"}}
<div class="theme-container">
  <sl-icon id="sun-icon" name="sun-fill" class="theme-icon {{ if not .dark_mode }}active{{ end }}"></sl-icon>

  <form 
    id="settings-form"
    hx-put="/theme"
    hx-trigger="sl-change from:sl-switch"
    hx-swap="none"
  >
    <sl-switch
      {{ if eq .dark_mode true }}checked{{ end }}
      name="darkMode"
      form="settings-form"
      _="on 'sl-change'
          remove .sl-theme-dark .sl-theme-light from <html/>
          if my.checked
              add .sl-theme-dark to <html/>
              add .active to #moon-icon
              remove .active from #sun-icon
          else
              add .sl-theme-light to <html/>
              add .active to #sun-icon
              remove .active from #moon-icon
          end"
    >
    </sl-switch>

    <!-- Session ID -->
    <input type="hidden" id="session-id" name="session_id" value="{{.session_id}}">
  </form>

  <sl-icon id="moon-icon" name="moon-fill" class="theme-icon {{ if .dark_mode }}active{{ end }}"></sl-icon>
</div>

<style>
.theme-container {
    position: fixed;
    top: 0;
    right: 1rem;
    z-index: 2;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    background: var(--sl-color-neutral-50);
    border: 1px solid var(--sl-color-neutral-200);
    border-radius: 0 0 var(--sl-border-radius-medium) var(--sl-border-radius-medium);
    padding: 0.5rem 1rem;
    width: fit-content;
    margin: 0 auto;
}

user agent stylesheet
div {

  .theme-icon {
    font-size: 1.5rem;
    color: var(--sl-color-neutral-500);
    transition: color 0.2s ease-in-out;
  }

  /* Ativo: sol amarelo, lua branca */
  #sun-icon.active {
    color: var(--sl-color-warning-500);
  }

  #moon-icon.active {
    color: var(--sl-color-gray-950);
  }
</style>
{{ end }}
